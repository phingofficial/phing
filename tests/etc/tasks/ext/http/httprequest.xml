<?xml version="1.0" ?>
<project name="test for http-request task" default="recipient">
    <!-- Actual tasks will be copied here from other targets -->
    <target name="recipient" />

    <target name="missingURL">
        <http-request />
    </target>

    <target name="matchesRegexp">
        <http-request url="http://example.com/" responseRegex="foo" />
    </target>

    <target name="matchesCodeRegexp">
        <http-request url="http://example.com/" responseCodeRegex="200" />
    </target>

    <target name="doesNotMatchRegexp">
        <http-request url="http://example.com/" responseRegex="bar" />
    </target>

    <target name="post">
        <http-request url="http://example.com/form" method="POST">
            <postparameter name="foo" value="bar" />
            <postparameter name="baz" value="quux" />
        </http-request>
    </target>

    <target name="authentication">
        <http-request url="http://example.com/" authScheme="digest" authUser="luser" authPassword="secret" />
    </target>

    <target name="nested-tags">
        <http-request url="http://example.com">
            <config name="timeout" value="10" />
            <header name="user-agent" value="Phing HttpRequestTask" />
        </http-request>
    </target>

    <target name="config-properties">
        <property name="hostname" value="localhost" />
        <property name="phing.http.proxy" value="http://${hostname}:8080/" />
        <property name="phing.http.timeout" value="20" />
        <http-request url="http://example.com/foo.bar" />
    </target>

    <target name="testPayloadOrPostParameters">
        <http-request url="http://example.com/post" method="POST">
            <postparameter name="username" value="foo"/>
            <payload>bar</payload>
        </http-request>
    </target>

    <target name="testPayload">
        <http-request url="http://example.com/post" method="POST">
            <payload>
                {"email": "foo@example.com"}
            </payload>
        </http-request>
    </target>

    <target name="testPayloadNoTrim">
        <http-request url="http://example.com/post" method="POST">
            <payload trim="false">
                19de4dd8-d46b-11f0-a654-d778f66caf95
            </payload>
        </http-request>
    </target>

    <target name="testResponseProperty">
        <http-request url="http://example.com/get" method="GET" responseProperty="example.response"/>
        <echo>${example.response}</echo>
    </target>

    <target name="testExistentProperty">
        <property name="existent.property" value="2bf39066-d46e-11f0-8c1a-9795b4c58881"/>
        <http-request url="http://example.com/get" method="GET" responseProperty="existent.property"/>
    </target>

</project>
